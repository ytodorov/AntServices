@{
    ViewBag.Title = "Send";
}

<div id="contactform">
    <p>
        If you feel like contacting me, please use this form to do so.
    </p>

    <form id="contact" action="@Url.Action("Index", "ContactController")" method="post">
        @*<li class="@Html.IsSelected(action: "Index")">
                <a href="@Url.Action("Index", "Contact")"> <span class="nav-label">Contact Form</span> </a>
            </li>*@
        <fieldset>
            <legend>Message/Comments</legend>
            <div class="hpanel hgreen">
                <div class="panel-body">
                    <input name="senderName" type="text" class="form-control" id="senderName" placeholder="Your Name:">
                </div>
                <div class="panel-body">
                    <input type="text" class="form-control" id="senderMail" placeholder="Your Email:">
                </div>
                <div class="panel-body">
                    <textarea class="form-control" id="comments" placeholder="Your Comment:"></textarea>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="hpanel hgreen">
                    <div class="panel-body">
                        <p>
                            <button type="button" class="ladda-button btn center-block btn-outline btn-success" id="btnSend" data-style="zoom-in">
                                <span class="ladda-label">Send</span>
                                <span class="ladda-spinner"></span>
                            </button>

                        </p>
                    </div>
                </div>
            </div>
        </fieldset>

    </form>
</div>
@section scripts {
    <script type="text/javascript">

        $("#btnSend").click(function btnSendClick(e) {
            e.preventDefault();

            var l = $("#btnSend").ladda();

            // Start loading
            l.ladda('start');


            $.ajax({
                method: "POST",
                url: '@Url.Action("Index", "ContactController")',
                data: {
                    ip: $("#ip").val(),
                    senderName: $("#senderName"),
                    senderMail: $("#senderMail"),
                    comments: $("#comments")
                },
                //success: function f(id) {
                //    window.location.href = "ping?id=" + id;

                //}
            })

        });
        $("#ip").keyup(function myfunction(eventData) {
            if (eventData.keyCode == 13) {
                $("#btnSend").click();
            }

        });

    </script>
}